<?xml version="1.0" encoding="UTF-8"?>
<mxfile modified="2019-08-06T11:30:28.474Z" host="www.draw.io" agent="Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36" etag="kZfq12gLP6GRtwp6QkZY" version="11.1.2" type="device" compressed="false">
  <diagram name="Page-1" id="fbcf5db9-b524-4cd4-e4f3-379dc89c3999">
    <mxGraphModel dx="1449" dy="328" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="2a0f93b5c73ef8e7-1" value="" style="line;strokeWidth=10;direction=south;html=1;fillColor=none;fontSize=13;fontColor=#000000;align=center;strokeColor=#AE4132;" parent="1" vertex="1">
          <mxGeometry x="360" y="70" width="10" height="800" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="2a0f93b5c73ef8e7-2" target="EZly6czL165JEKDRB5td-2">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-2" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;strokeWidth=1;fillColor=#F2931E;fontSize=13;fontColor=#FFFFFF;align=center;gradientColor=none;gradientDirection=east;verticalAlign=top;shadow=1;" parent="1" vertex="1">
          <mxGeometry x="170" y="80" width="270" height="140" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-2" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span style=&quot;font-size: 9px&quot;&gt;1.kubeadm init --kebernetes-version $(kubeadm version -o short)&lt;/span&gt;&lt;br&gt;(Set the conf to users env variables)&lt;br&gt;1. sudo cp /etc/kubernetes/admin.conf $HOME/&lt;br&gt;2. sudo chown $(id -u):$(id -g) $HOME/admin.conf&lt;br&gt;3. export KUBECONFIG=$HOME/admin.conf&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;strokeWidth=1;fillColor=#FFFFFF;fontSize=13;fontColor=#000000;align=center;gradientColor=none;gradientDirection=east;verticalAlign=top;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="-160" y="135" width="290" height="85" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-3" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=30;fontColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="179" y="104.5" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="2a0f93b5c73ef8e7-4" target="EZly6czL165JEKDRB5td-4">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-4" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;strokeWidth=1;fillColor=#10739E;fontSize=13;fontColor=#FFFFFF;align=center;gradientColor=none;gradientDirection=east;verticalAlign=top;shadow=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="250" width="260" height="85" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-4" value="&lt;font style=&quot;font-size: 10px&quot;&gt;1.cat /opt/weave-kube&lt;br&gt;2. kubectl apply -f /opt/weave-kube&lt;br&gt;(Weave deploys as a series of Pods on cluster)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;strokeWidth=1;fillColor=#FFFFFF;fontSize=13;fontColor=#000000;align=center;gradientColor=none;gradientDirection=east;verticalAlign=top;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="250" width="260" height="85" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-5" value="2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=30;fontColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="350" y="283" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="2a0f93b5c73ef8e7-6" target="EZly6czL165JEKDRB5td-6">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-6" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;strokeWidth=1;fillColor=#F2931E;fontSize=13;fontColor=#FFFFFF;align=center;gradientColor=none;gradientDirection=east;verticalAlign=top;shadow=1;" parent="1" vertex="1">
          <mxGeometry x="170" y="360" width="310" height="85" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-6" value="&lt;font style=&quot;font-size: 10px&quot;&gt;Get the token from kubeadm on master&lt;br&gt;1. kubeadm token list&lt;br&gt;2.&amp;nbsp;kubeadm join --discovery-token-unsafe-skip-ca-verification --token=x.y &amp;lt;masterIP:6443&amp;gt;&lt;br&gt;(on new node, provide IP addr of Master)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;strokeWidth=1;fillColor=#FFFFFF;fontSize=13;fontColor=#000000;align=center;gradientColor=none;gradientDirection=east;verticalAlign=top;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="-170" y="360" width="260" height="85" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-7" value="3" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=30;fontColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="180" y="393" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="2a0f93b5c73ef8e7-8" target="EZly6czL165JEKDRB5td-8">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-8" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;strokeWidth=1;fillColor=#10739E;fontSize=13;fontColor=#FFFFFF;align=center;gradientColor=none;gradientDirection=east;verticalAlign=top;shadow=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="475" width="260" height="85" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-8" value="&lt;font style=&quot;font-size: 10px&quot;&gt;1.kubectl create deployment http --image=katacoda/docker-http-server:latest&lt;br&gt;2. kubectl get pods&lt;br&gt;3.docker ps | grep docker-http-server&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;strokeWidth=1;fillColor=#FFFFFF;fontSize=13;fontColor=#000000;align=center;gradientColor=none;gradientDirection=east;verticalAlign=top;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="475" width="260" height="85" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-9" value="4" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=30;fontColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="350" y="508" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="2a0f93b5c73ef8e7-10" target="EZly6czL165JEKDRB5td-10">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="560" y="635"/>
              <mxPoint x="560" y="713"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-10" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;strokeWidth=1;fillColor=#F2931E;fontSize=13;fontColor=#FFFFFF;align=center;gradientColor=none;gradientDirection=east;verticalAlign=top;shadow=1;" parent="1" vertex="1">
          <mxGeometry x="170" y="585" width="310" height="145" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-10" value="&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;cat &amp;lt;&amp;lt; EOF | kubectl create -f -&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;apiVersion: v1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;kind: ServiceAccount&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;metadata:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; name: admin-user&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; namespace: kube-system&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;---&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;apiVersion: rbac.authorization.k8s.io/v1beta1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;kind: ClusterRoleBinding&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;metadata:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; name: admin-user&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;roleRef:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; apiGroup: rbac.authorization.k8s.io&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; kind: ClusterRole&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; name: cluster-admin&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;subjects:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;- kind: ServiceAccount&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; name: admin-user&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; namespace: kube-system&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;EOF&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;fontSize=13;align=center;gradientDirection=east;verticalAlign=top;shadow=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="640" y="585" width="260" height="255" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-11" value="5" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=30;fontColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="180" y="623" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-18" value="&lt;h1&gt;Init Kubeadm&lt;/h1&gt;&lt;p&gt;Init cluster configs and env vars.&lt;br&gt;[certs] are generated and paths&lt;br&gt;[etcd] configured&lt;br&gt;&amp;nbsp; &amp;nbsp;[IP Allocation] configured&lt;br&gt;[coredns] configured&lt;br&gt;[Master Node] is setup&lt;br&gt;&lt;br&gt;kubectl cluster-info&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;strokeColor=none;strokeWidth=4;fillColor=none;gradientColor=#007FFF;fontSize=9;fontColor=#FFFFFF;align=center;" parent="1" vertex="1">
          <mxGeometry x="219" y="86" width="181" height="124" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-19" value="&lt;h1&gt;Deploy Container N/w Interface(CNI)&lt;/h1&gt;&lt;p&gt;Use one of network providers (WeaveWork).Install the addon follow docs.&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;strokeColor=none;strokeWidth=4;fillColor=none;gradientColor=#007FFF;fontSize=9;fontColor=#FFFFFF;align=center;" parent="1" vertex="1">
          <mxGeometry x="380" y="254" width="200" height="77" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-20" value="&lt;h1&gt;Join Cluster&lt;/h1&gt;&lt;p&gt;Once Master &amp;amp; CNI has initialized , other nodes can join cluster with correct token.&lt;br&gt;New node initializes KUBELET.&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;strokeColor=none;strokeWidth=4;fillColor=none;gradientColor=#007FFF;fontSize=9;fontColor=#FFFFFF;align=center;" parent="1" vertex="1">
          <mxGeometry x="220" y="364" width="240" height="77" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-21" value="&lt;h1&gt;Deploy Pod&lt;/h1&gt;&lt;p&gt;Once cluster state is ready , it can be scheduled for deployments. Commands are always issued to the master.&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;strokeColor=none;strokeWidth=4;fillColor=none;gradientColor=#007FFF;fontSize=9;fontColor=#FFFFFF;align=center;" parent="1" vertex="1">
          <mxGeometry x="390" y="479" width="190" height="77" as="geometry"/>
        </mxCell>
        <mxCell id="2a0f93b5c73ef8e7-22" value="&lt;h1&gt;Deploy Dashboard&lt;/h1&gt;&lt;p&gt;&lt;span&gt;Kubernetes has a web-dashboard Service that can be deployed in the namespace.&amp;nbsp;&lt;br&gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;ServiceAccount is required to login.&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;A ClusterRoleBinding is used to assign the ServiceAccount(admin-user) the role of a cluster-admin on the cluster.&lt;/span&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;strokeColor=none;strokeWidth=4;fillColor=none;gradientColor=#007FFF;fontSize=9;fontColor=#FFFFFF;align=left;" parent="1" vertex="1">
          <mxGeometry x="210" y="600" width="260" height="150" as="geometry"/>
        </mxCell>
        <mxCell id="EZly6czL165JEKDRB5td-1" value="&lt;font style=&quot;font-size: 19px&quot; color=&quot;#3399ff&quot;&gt;Initialize a multinode Kubernetes cluster&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="110" y="40" width="430" height="20" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
